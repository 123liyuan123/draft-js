(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{137:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return p}));n(210),n(211),n(207),n(212),n(213),n(214);var a=n(208);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var l={id:"advanced-topics-custom-block-render-map",title:"Custom Block Rendering"},o=[{value:"Draft default block render map",id:"draft-default-block-render-map",children:[]},{value:"Configuring block render map",id:"configuring-block-render-map",children:[]},{value:"Custom block wrappers",id:"custom-block-wrappers",children:[]}],b={rightToc:o},c="wrapper";function p(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(c,r({},b,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"This article discusses how to customize Draft default block rendering.\nThe block rendering is used to define supported block types and their respective\nrenderers, as well as converting pasted content to known Draft block types."),Object(a.b)("p",null,"When pasting content, or when calling\n",Object(a.b)("a",r({parentName:"p"},{href:"/docs/api-reference-data-conversion#convertfromhtml"}),"convertFromHTML"),",\nDraft will convert pasted content to the respective block rendering type\nby matching the Draft block render map with the matched tag."),Object(a.b)("h2",{id:"draft-default-block-render-map"},"Draft default block render map"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",r({parentName:"tr"},{align:null}),"HTML element"),Object(a.b)("th",r({parentName:"tr"},{align:null}),"Draft block type"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<h1/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"header-one")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<h2/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"header-two")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<h3/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"header-three")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<h4/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"header-four")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<h5/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"header-five")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<h6/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"header-six")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<blockquote/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"blockquote")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<pre/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"code-block")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<figure/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"atomic")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<li/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"unordered-list-item,ordered-list-item","*","*")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"<div/>")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"unstyled","*","*","*")))),Object(a.b)("p",null,"*","*"," - Block type will be based on the parent ",Object(a.b)("inlineCode",{parentName:"p"},"<ul/>")," or ",Object(a.b)("inlineCode",{parentName:"p"},"<ol/>")),Object(a.b)("p",null,"*","*","*"," - Any block that is not recognized by the block rendering mapping will be treated as unstyled"),Object(a.b)("h2",{id:"configuring-block-render-map"},"Configuring block render map"),Object(a.b)("p",null,"Draft's default block render map can be overwritten by passing an\n",Object(a.b)("a",r({parentName:"p"},{href:"http://facebook.github.io/immutable-js/docs/#/Map"}),"Immutable Map")," to\nthe editor blockRender props."),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"example of overwriting default block render map:")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-js"}),"// The example below deliberately only allows\n// 'heading-two' as the only valid block type and\n// updates the unstyled element to also become a h2.\nconst blockRenderMap = Immutable.Map({\n  'header-two': {\n    element: 'h2'\n  },\n  'unstyled': {\n    element: 'h2'\n  }\n});\n\nclass RichEditor extends React.Component {\n  render() {\n    return (\n      <Editor\n        ...\n        blockRenderMap={blockRenderMap}\n      />\n    );\n  }\n}\n")),Object(a.b)("p",null,"There are cases where instead of overwriting the defaults, we only want to add new block types.\nThis can be done by using the DefaultDraftBlockRenderMap reference to create a new blockRenderMap"),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"example of extending default block render map:")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-js"}),"const blockRenderMap = Immutable.Map({\n  'section': {\n    element: 'section'\n  }\n});\n\n// Include 'paragraph' as a valid block and updated the unstyled element but\n// keep support for other draft default block types\nconst extendedBlockRenderMap = Draft.DefaultDraftBlockRenderMap.merge(blockRenderMap);\n\nclass RichEditor extends React.Component {\n  render() {\n    return (\n      <Editor\n        ...\n        blockRenderMap={extendedBlockRenderMap}\n      />\n    );\n  }\n}\n")),Object(a.b)("p",null,"When Draft parses pasted HTML, it maps from HTML elements back into\nDraft block types. If you want to specify other HTML elements that map to a\nparticular block type, you can add the array ",Object(a.b)("inlineCode",{parentName:"p"},"aliasedElements")," to the block config."),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"example of unstyled block type alias usage:")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-js"}),"'unstyled': {\n  element: 'div',\n  aliasedElements: ['p'],\n}\n")),Object(a.b)("h2",{id:"custom-block-wrappers"},"Custom block wrappers"),Object(a.b)("p",null,"By default, the html element is used to wrap block types. However, a react component\ncan also be provided to the ",Object(a.b)("em",{parentName:"p"},"blockRenderMap")," to wrap the EditorBlock."),Object(a.b)("p",null,"During pasting, or when calling\n",Object(a.b)("a",r({parentName:"p"},{href:"/docs/api-reference-data-conversion#convertfromhtml"}),"convertFromHTML"),",\nthe html will be scanned for matching tag elements. A wrapper will be used when there is a definition for\nit on the ",Object(a.b)("em",{parentName:"p"},"blockRenderMap")," to wrap that particular block type. For example:"),Object(a.b)("p",null,"Draft uses wrappers to wrap ",Object(a.b)("inlineCode",{parentName:"p"},"<li/>")," inside either ",Object(a.b)("inlineCode",{parentName:"p"},"<ol/>")," or ",Object(a.b)("inlineCode",{parentName:"p"},"<ul/>"),", but wrappers can also be used\nto wrap any other custom block type."),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"example of extending default block render map to use a react component for a custom block:")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-js"}),"class MyCustomBlock extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className='MyCustomBlock'>\n        {/* here, this.props.children contains a <section> container, as that was the matching element */}\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nconst blockRenderMap = Immutable.Map({\n  'MyCustomBlock': {\n    // element is used during paste or html conversion to auto match your component;\n    // it is also retained as part of this.props.children and not stripped out\n    element: 'section',\n    wrapper: <MyCustomBlock />,\n  }\n});\n\n// keep support for other draft default block types and add our myCustomBlock type\nconst extendedBlockRenderMap = Draft.DefaultDraftBlockRenderMap.merge(blockRenderMap);\n\nclass RichEditor extends React.Component {\n  ...\n  render() {\n    return (\n      <Editor\n        ...\n        blockRenderMap={extendedBlockRenderMap}\n      />\n    );\n  }\n}\n")))}p.isMDXComponent=!0}}]);